# ðŸ““ Dev-Log

âœ… Ð£Ð¶Ðµ ÑÐ´ÐµÐ»Ð°Ð½Ð¾:

1. **Ð‘Ð°Ð·Ð¾Ð²Ñ‹Ð¹ Ð±Ð¾Ñ‚ (aiogram + DeepSeek API)**  
   - Ð—Ð°Ð³Ñ€ÑƒÐ¶Ð°ÐµÑ‚ÑÑ Ð¸Ð· `.env` (`TELEGRAM_TOKEN`, `DEEPSEEK_API_KEY`).  
   - Ð Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ñ‡ÐµÑ€ÐµÐ· aiogram, Ð¾Ñ‚Ð²ÐµÑ‡Ð°ÐµÑ‚ Ð² Telegram.  
   - DeepSeek Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹ Ñ‚ÐµÐ¿ÐµÑ€ÑŒ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÑŽÑ‚ÑÑ Ñ‡ÐµÑ€ÐµÐ· `asyncio.to_thread`, Ð½Ðµ Ð±Ð»Ð¾ÐºÐ¸Ñ€ÑƒÑ event loop.  

2. **ÐšÐ°ÑÑ‚Ð¾Ð¼Ð½Ñ‹Ðµ Ñ€ÐµÐ°ÐºÑ†Ð¸Ð¸**  
   - ÐŸÑ€Ð¸Ð²ÐµÑ‚ÑÑ‚Ð²Ð¸Ñ (GREETINGS).  
   - Horny-Ñ€ÐµÐ¿Ð»Ð¸ÐºÐ¸ (HORNY).  
   - ÐžÑÐºÐ¾Ñ€Ð±Ð»ÐµÐ½Ð¸Ñ (INSULTS) + Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ð¾Ñ‚Ð²ÐµÑ‚Ñ‹ Ð½Ð° Ð²Ð¾Ð¿Ñ€Ð¾ÑÐ¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ð¾ÑÐºÐ¾Ñ€Ð±Ð»ÐµÐ½Ð¸Ñ (QUESTION_INSULT_REPLIES).  

3. **Ð›Ð¾Ð³Ð¸ÐºÐ° Ñ€ÐµÐ°ÐºÑ†Ð¸Ð¸**  
   - `is_greeting()` â€” Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚ ÐºÐ¾Ñ€Ð¾Ñ‚ÐºÐ¸Ðµ Ð¿Ñ€Ð¸Ð²ÐµÑ‚ÑÑ‚Ð²Ð¸Ñ.  
   - `detect_insult_ai()` â€” ÐºÐ»Ð°ÑÑÐ¸Ñ„Ð¸Ñ†Ð¸Ñ€ÑƒÐµÑ‚ Ð¾ÑÐºÐ¾Ñ€Ð±Ð»ÐµÐ½Ð¸Ñ Ñ‡ÐµÑ€ÐµÐ· Ð˜Ð˜ (direct, general, question, none).  
   - `detect_mood_ai()` â€” Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÑÐµÑ‚ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½Ð¸Ðµ (sweet, horny, angry, playful).  
   - `detect_fetish_role()` â€” Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÑÐµÑ‚ Ñ€Ð¾Ð»ÑŒ Ð² RP (active/passive/unknown).  
   - Ð•ÑÐ»Ð¸ Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ð½Ðµ ÑÐ¾Ð²Ð¿Ð°Ð»Ð¾ â†’ Ð¾Ñ‚Ð²ÐµÑ‚ Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÐµÑ‚ DeepSeek.  

4. **JSON-ÐºÐ¾Ð½Ñ„Ð¸Ð³Ð¸**  
   - Ð’ÑÐµ Ð²Ñ‹Ð½ÐµÑÐµÐ½Ñ‹ Ð² `config/`.  
   - Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ñ‡ÐµÑ€ÐµÐ· ÑƒÐ½Ð¸Ð²ÐµÑ€ÑÐ°Ð»ÑŒÐ½ÑƒÑŽ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ `load_json()` Ñ try/except.  
   - ÐžÑˆÐ¸Ð±ÐºÐ¸ Ð¿Ð°Ñ€ÑÐ¸Ð½Ð³Ð° Ð¸Ð»Ð¸ Ð¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ð²Ð¸Ñ Ñ„Ð°Ð¹Ð»Ð° Ð»Ð¾Ð³Ð¸Ñ€ÑƒÑŽÑ‚ÑÑ.  

5. **Ð›Ð¸Ñ‡Ð½Ð¾ÑÑ‚ÑŒ Ð¸ Ð¿Ñ€Ð¾Ð¼Ð¿Ñ‚Ñ‹**  
   - `personality.json` â€” Ñ„Ñ€Ð°Ð·Ñ‹ (GREETINGS, HORNY, INSULTS).  
   - `system_prompt.json` â€” ÑÐ¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ð¹ Ð¿Ñ€Ð¾Ð¼Ð¿Ñ‚ (ÑÑ‚Ñ€Ð¾ÐºÐ° Ð¸Ð»Ð¸ ÑÐ¿Ð¸ÑÐ¾Ðº).  
   - `rp_prompt.json` â€” Ð¿Ñ€Ð¾Ð¼Ð¿Ñ‚ Ð´Ð»Ñ RP.  
   - Ð’ system prompt Ð¿Ñ€Ð¾Ð¿Ð¸ÑÐ°Ð½Ñ‹ Ð¿Ñ€Ð°Ð²Ð¸Ð»Ð° Ð¿Ð¾Ð²ÐµÐ´ÐµÐ½Ð¸Ñ (Ð¼ÑƒÐ¶ÑÐºÐ¾Ð¹ Ð¿Ð¾Ð», Ð¼ÐµÐ¼Ñ‹, horny-Ð»ÐµÐºÑÐ¸ÐºÐ°, Ð¿Ð¾Ð»Ð¸Ñ‚Ð¸ÐºÐ° â†’ Â«Ð¸Ð´Ð¸ Ð½Ð°Ñ…ÑƒÐ¹Â», RP Ð² Ð·Ð²Ñ‘Ð·Ð´Ð¾Ñ‡ÐºÐ°Ñ… Ð¸ Ñ‚.Ð´.).  

6. **ÐžÑÐºÐ¾Ñ€Ð±Ð»ÐµÐ½Ð¸Ñ Ð¸ Ñ‚Ñ€Ð¸Ð³Ð³ÐµÑ€Ñ‹**  
   - Ð Ð°ÑÑˆÐ¸Ñ€ÐµÐ½Ð½Ñ‹Ð¹ ÑÐ»Ð¾Ð²Ð°Ñ€ÑŒ Ð²Ñ‹Ð½ÐµÑÐµÐ½ Ð² `triggers.json`.  
   - Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ AI-ÐºÐ»Ð°ÑÑÐ¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸Ñ + ÑÐ²Ð¾Ð¸ ÑÐ¿Ð¸ÑÐºÐ¸.  

7. **ÐŸÐ¾ÑÑ‚Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ð¾Ñ‚Ð²ÐµÑ‚Ð¾Ð² DeepSeek**  
   - Ð‘Ð¾Ñ‚ Ð¼Ð¾Ð¶ÐµÑ‚ Ð´Ð¾Ð±Ð°Ð²Ð»ÑÑ‚ÑŒ horny-Ñ„Ñ€Ð°Ð·Ñ‹ Ð¸ ÑÐ¼Ð¾Ð´Ð·Ð¸.  
   - HORNY Ð²ÐºÐ»ÑŽÑ‡Ð°ÐµÑ‚ÑÑ:  
     â€¢ Ñ 2-Ð³Ð¾ Ð¾Ñ‚Ð²ÐµÑ‚Ð° Ð² RP (20% ÑˆÐ°Ð½Ñ, Ð½Ð°Ñ‡Ð°Ð»Ð¾/ÐºÐ¾Ð½ÐµÑ†).  
     â€¢ Ñ 4-Ð³Ð¾ Ð¾Ñ‚Ð²ÐµÑ‚Ð° Ð² Ñ‡Ð°Ñ‚Ðµ (15% ÑˆÐ°Ð½Ñ, Ñ‚Ð¾Ð»ÑŒÐºÐ¾ ÐºÐ¾Ð½ÐµÑ†).  
   - Ð˜Ð½Ð¾Ð³Ð´Ð° Ð´Ð¾Ð±Ð°Ð²Ð»ÑÐµÑ‚ÑÑ Ñ€Ð°Ð½Ð´Ð¾Ð¼Ð½Ñ‹Ð¹ ÑÐ¼Ð¾Ð´Ð·Ð¸ (ÐµÑÐ»Ð¸ Ñ€ÐµÐ¿Ð»Ð¸ÐºÐ° Ð½Ðµ Ð·Ð°ÐºÐ°Ð½Ñ‡Ð¸Ð²Ð°ÐµÑ‚ÑÑ Ð¸Ð¼).  

8. **Ð¡Ñ‚Ð°Ñ€Ñ‚Ð¾Ð²Ñ‹Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ**  
   - `/start` â†’ ÐºÐ°ÑÑ‚Ð¾Ð¼Ð½Ð¾Ðµ Ð¿Ñ€Ð¸Ð²ÐµÑ‚ÑÑ‚Ð²Ð¸Ðµ Ð´Ð»Ñ Ð½Ð¾Ð²Ñ‹Ñ… Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹.  
   - Ð”Ð»Ñ ÑÑ‚Ð°Ñ€Ñ‹Ñ… Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹ Ð²Ñ‹Ð´Ð°Ñ‘Ñ‚ÑÑ ÑÐ»ÑƒÑ‡Ð°Ð¹Ð½Ñ‹Ð¹ Ñ‚ÐµÐºÑÑ‚ Ð¸Ð· `start_messages.json`.  

9. **RP-Ð»Ð¾Ð³Ð¸ÐºÐ°**  
   - Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ Ð² *Ð·Ð²Ñ‘Ð·Ð´Ð¾Ñ‡ÐºÐ°Ñ…* â†’ RP-Ñ€ÐµÐ¶Ð¸Ð¼.  
   - Ð¤ÐµÑ‚Ð¸ÑˆÐ¸ Ð¸ Ñ€Ð¾Ð»Ð¸ ÑƒÑ‡Ð¸Ñ‚Ñ‹Ð²Ð°ÑŽÑ‚ÑÑ Ð² RP (active/passive).  
   - Ð•ÑÑ‚ÑŒ Ð°Ð½Ñ‚Ð¸-ÐºÑ€Ð¸Ð½Ð¶ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€ Ð´Ð»Ñ Ñ‚ÐµÐ»Ð° Ð­ÐºÑÐ¸ (Ð½Ðµ Ð¿Ð¸ÑÐ°Ñ‚ÑŒ Â«Ð¼ÐµÑ…Ð°Ð½Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ñ‡Ð»ÐµÐ½Â» Ð¸ Ñ‚.Ð¿.).  

10. **Ð Ð°Ð±Ð¾Ñ‚Ð° Ñ Ð¼ÐµÐ´Ð¸Ð°**  
    - Ð¤Ð¾Ñ‚Ð¾ Ð¸ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ñ‹ image/* ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÑŽÑ‚ÑÑ Ð² `images.json`.  
    - `/randomart` â†’ ÑÐ»ÑƒÑ‡Ð°Ð¹Ð½Ñ‹Ð¹ Ð°Ñ€Ñ‚.  
    - Ð’ÑÑ‘ Ñ‡ÐµÑ€ÐµÐ· `load_images()` / `save_images()`.  

11. **ÐÐ´Ð¼Ð¸Ð½ÑÐºÐ¸Ðµ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹ (admin_commands.py)**  
    - `/listimages [N]` â€” ÑÐ¿Ð¸ÑÐ¾Ðº Ð¿Ð¾ÑÐ»ÐµÐ´Ð½Ð¸Ñ… Ð°Ñ€Ñ‚Ð¾Ð².  
    - `/removeimage id1,id2` â€” ÑƒÐ´Ð°Ð»Ð¸Ñ‚ÑŒ Ð°Ñ€Ñ‚Ñ‹.  
    - `/artcount` â€” ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð°Ñ€Ñ‚Ð¾Ð².  
    - `/status` â€” Ð°Ð¿Ñ‚Ð°Ð¹Ð¼, Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ð¸, ÑÑ‡Ñ‘Ñ‚Ñ‡Ð¸Ðº Ð¾Ñ‚Ð²ÐµÑ‚Ð¾Ð², Ð¿Ð¾ÑÐ»ÐµÐ´Ð½Ð¸Ðµ Ð»Ð¾Ð³Ð¸.  
    - `/ping` â€” Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð¾ÑÑ‚Ð¸.  
    - `/ownhelp` â€” ÑÐ¿Ð¸ÑÐ¾Ðº Ð°Ð´Ð¼Ð¸Ð½ÑÐºÐ¸Ñ… ÐºÐ¾Ð¼Ð°Ð½Ð´.  
    - Ð˜Ð¼Ð¿Ð¾Ñ€Ñ‚ Ð¸Ð´Ñ‘Ñ‚ Ð½Ð¸Ð¶Ðµ Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸ ÑÐ´Ñ€Ð° (`# noqa: E402`).  

12. **Ð“Ð»Ð¾Ð±Ð°Ð»ÑŒÐ½Ð¾Ðµ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ (state.py)**  
    - `BOT_REPLY_COUNT`, `USERS`, `START_TIME`, `MOOD`.  
    - Ð¢Ð¸Ð¿Ñ‹ Ð¿Ñ€Ð¾ÑÑ‚Ð°Ð²Ð»ÐµÐ½Ñ‹ (`int`, `List[int]`, `float`, `str`).  
    - Ð”Ð¾ÐºÑÑ‚Ñ€Ð¸Ð½Ð³ Ð¾Ð¿Ð¸ÑÑ‹Ð²Ð°ÐµÑ‚ Ð½Ð°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ….  

13. **Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°**  
    - `config/` â€” JSON-Ñ„Ð°Ð¹Ð»Ñ‹.  
    - `src/` Ð¿Ð»Ð°Ð½Ð¸Ñ€ÑƒÐµÑ‚ÑÑ ÐºÐ°Ðº Ð¾ÑÐ½Ð¾Ð²Ð½Ð°Ñ Ð¿Ð°Ð¿ÐºÐ° Ð´Ð»Ñ ÐºÐ¾Ð´Ð° (main.py, handlers/, services/, core/).  
    - Ð›Ð¾Ð³Ð¸ Ð¿ÐµÑ€ÐµÐ½ÐµÑÐµÐ½Ñ‹ Ð² `logs/`.  
    - ÐŸÐ¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÐ° Ðº Ñ‚Ð¾Ð¿-ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ðµ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° (handlers, services, core).  

14. **ÐšÐ¾Ð´-ÑÑ‚Ð°Ð¹Ð» Ð¸ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ**  
    - Ð’ÑÐµ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ ÑÐ½Ð°Ð±Ð¶ÐµÐ½Ñ‹ docstring.  
    - ÐÐ½Ð½Ð¾Ñ‚Ð°Ñ†Ð¸Ð¸ Ñ‚Ð¸Ð¿Ð¾Ð² (`-> None`, `-> List[str]`, Ð¸ Ñ‚.Ð¿.).  
    - `ruff` Ð¸ `mypy` Ð³Ð¾Ñ‚Ð¾Ð²Ñ‹ Ðº Ð¿Ñ€Ð¾Ð³Ð¾Ð½Ñƒ.  

---